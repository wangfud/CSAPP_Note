
# 第三章  程序的机器级表示

## 3.2 程序编码

假设有一个c程序，有两个文件p1.c和p2.c。可以使用一下命令编译：

```sh
gcc -Og -o p p1.c p2.c
```

> - -Og:使用生成符合原始c代码整体结构的机器代码优化等级。

### 3.2.1 机器级代码

对于机器级编程，两种抽象非常重要：

- `指令集体结构或者指令集架构（Instruction Set Architecture ,ISA）`:定义机器级程序的格式和行为。它定义了处理器状态，指令的格式，以及每条指令对状态的影响。
- **机器级程序使用的内存地址是虚拟地址。提供的内存模型看上去是一个非常大的字节数组。**

编译器编译的过程是将C语言提供的相对抽象的执行模型表示的程序转化为处理器执行的非常基本的指令。

汇编代码表示非常接近机器代码，与机器代码的二进制格式相比，汇编代码的特点是`它用可读性更好的文本格式表示。`

机器代码用到的寄存器有：

- **程序计数器PC（`%rip`表示）**：给出将要执行的下一条指令在内存中的地址。
- **整数寄存器**：包含16个命明的位置，分别存储64位的值。
- **条件码寄存器**：保存最近执行的算数或逻辑指令的状态。比如用来实现if'和while语句。
- **一组向量寄存器**：存放一个或多个整数和浮点数。
